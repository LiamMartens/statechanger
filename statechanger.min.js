var State={url:window.location.origin,ignore_head:!1,update_selector:"body",stateObject:function(a){this.state=a;this.path=State.url+"/"+this.state;this.ignore_head=!1;this.update_selector="body";this.update_url=!0;this.ignoreHead=function(){this.ignore_head=!0;return this};this.updateHead=function(){this.ignore_head=!1;return this};this.updateSelector=function(b){this.update_selector=b;return this};this.xhr=new XMLHttpRequest;this.xhr.open("GET",this.state);this.load=function(b){0==b&&(this.update_url=
!1);this.xhr.send()};this.success=function(b){this.xhr.addEventListener("readystatechange",function(){4==this.xhr.readyState&&200==this.xhr.status&&this.callback.call(this.callback,this.xhr.response)}.bind({xhr:this.xhr,callback:b}));return this};this.error=function(b){this.xhr.addEventListener("readystatechange",function(){4==this.xhr.readyState&&200!=this.xhr.status&&this.callback.call(this.callback,this.xhr,this.xhr.response)}.bind({xhr:this.xhr,callback:b}));return this};this.parse=function(b){var a=
document.createElement("html");a.innerHTML=b;this.ignore_head||(document.querySelector("head").innerHTML=a.querySelector("head").innerHTML);document.querySelector(this.update_selector).innerHTML=a.querySelector(this.update_selector).innerHTML;1==this.update_url&&(window.history?window.history.pushState(this.state,document.querySelector("head title").innerText,this.path):window.location=this.path);b=Array.prototype.slice.call(document.querySelectorAll("body script"));this.ignore_head||b.concat(Array.prototype.slice.call(document.querySelectorAll("head script")));
for(a=0;a<b.length;a++)if(!b[a].hasAttribute("statechanger")){for(var d=document.createElement("script"),c=0;c<b[a].attributes.length;c++)d.setAttribute(b[a].attributes[c].nodeName,b[a].attributes[c].nodeValue);d.innerHTML=b[a].innerHTML;b[a].parentNode.replaceChild(d,b[a])}}},"goto":function(a){a=new State.stateObject(a);State.ignore_head&&st.ignoreHead();st.updateSelector(State.update_selector);a.success(a.parse.bind(a));return a},initialize:function(){window.addEventListener("popstate",function(a){a=
State["goto"](a.currentTarget.location.pathname.trim("/"));State.ignore_head&&a.ignoreHead();a.updateSelector(State.update_selector);a.load(!1)})}};State.initialize();
